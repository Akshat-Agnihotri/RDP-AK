name: CustomAvicaRDP

on:
  workflow_dispatch:
  schedule:
    - cron: '0 */4 * * *'  # Auto restart every 4 hours

jobs:
  build:
    name: Start Building...
    runs-on: windows-latest
    timeout-minutes: 360

    steps:
      - name: Downloading & Installing Essentials
        shell: powershell
        run: |
          Invoke-WebRequest -Uri "https://gitlab.com/userup908/my-rdp/-/raw/main/Downloads.bat" -OutFile "Downloads.bat"
          Start-Process -FilePath "Downloads.bat" -Wait

      - name: Setup System User
        shell: powershell
        run: |
          net user runneradmin TheDisa1a
          Write-Host "✓ System user configured" -ForegroundColor Green

      - name: Show Connection Info
        shell: powershell
        run: |
          Write-Host "==================== AVICA RDP CONNECTION ====================" -ForegroundColor Cyan
          Write-Host "WhatsApp: +923460257488"
          Write-Host "Created by USMAN PASHA AKA H4K3R"
          Write-Host "Avica ID Link: Check GoFile link below"
          Write-Host "Instructions: Go to GoFile link, get Avica ID and password"
          Write-Host "Download Avica app and connect!"
          Write-Host "Note: GoFile link changes every time!" -ForegroundColor Red
          Write-Host ""
          Write-Host "⌛ Waiting for GoFile link..." -ForegroundColor Magenta

      - name: Start Avica Service
        shell: cmd
        run: show.bat

      - name: Keep Session Active
        shell: cmd
        run: loop.bat

